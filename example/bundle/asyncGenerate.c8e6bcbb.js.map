{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-9ec3e998d158f9e5.js","node_modules/stats.js/build/stats.min.js","example/asyncGenerate.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"ggXQv\\\":\\\"asyncGenerate.c8e6bcbb.js\\\",\\\"b4BBl\\\":\\\"generateAsync.worker.5bf93d10.js\\\",\\\"9JIya\\\":\\\"asyncGenerate.924881df.js\\\",\\\"bEy7u\\\":\\\"asyncGenerate.6b6e94f2.js\\\",\\\"817sr\\\":\\\"asyncGenerate.4d3a79b0.js\\\"}\"));","// stats.js - http://github.com/mrdoob/stats.js\n(function(f,e){\"object\"===typeof exports&&\"undefined\"!==typeof module?module.exports=e():\"function\"===typeof define&&define.amd?define(e):f.Stats=e()})(this,function(){var f=function(){function e(a){c.appendChild(a.dom);return a}function u(a){for(var d=0;d<c.children.length;d++)c.children[d].style.display=d===a?\"block\":\"none\";l=a}var l=0,c=document.createElement(\"div\");c.style.cssText=\"position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000\";c.addEventListener(\"click\",function(a){a.preventDefault();\nu(++l%c.children.length)},!1);var k=(performance||Date).now(),g=k,a=0,r=e(new f.Panel(\"FPS\",\"#0ff\",\"#002\")),h=e(new f.Panel(\"MS\",\"#0f0\",\"#020\"));if(self.performance&&self.performance.memory)var t=e(new f.Panel(\"MB\",\"#f08\",\"#201\"));u(0);return{REVISION:16,dom:c,addPanel:e,showPanel:u,begin:function(){k=(performance||Date).now()},end:function(){a++;var c=(performance||Date).now();h.update(c-k,200);if(c>g+1E3&&(r.update(1E3*a/(c-g),100),g=c,a=0,t)){var d=performance.memory;t.update(d.usedJSHeapSize/\n1048576,d.jsHeapSizeLimit/1048576)}return c},update:function(){k=this.end()},domElement:c,setMode:u}};f.Panel=function(e,f,l){var c=Infinity,k=0,g=Math.round,a=g(window.devicePixelRatio||1),r=80*a,h=48*a,t=3*a,v=2*a,d=3*a,m=15*a,n=74*a,p=30*a,q=document.createElement(\"canvas\");q.width=r;q.height=h;q.style.cssText=\"width:80px;height:48px\";var b=q.getContext(\"2d\");b.font=\"bold \"+9*a+\"px Helvetica,Arial,sans-serif\";b.textBaseline=\"top\";b.fillStyle=l;b.fillRect(0,0,r,h);b.fillStyle=f;b.fillText(e,t,v);\nb.fillRect(d,m,n,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d,m,n,p);return{dom:q,update:function(h,w){c=Math.min(c,h);k=Math.max(k,h);b.fillStyle=l;b.globalAlpha=1;b.fillRect(0,0,r,m);b.fillStyle=f;b.fillText(g(h)+\" \"+e+\" (\"+g(c)+\"-\"+g(k)+\")\",t,v);b.drawImage(q,d+a,m,n-a,p,d,m,n-a,p);b.fillRect(d+n-a,m,a,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d+n-a,m,a,g((1-h/w)*p))}}};return f});\n","import * as THREE from 'three';\nimport Stats from 'stats.js';\nimport { GUI } from 'three/examples/jsm/libs/lil-gui.module.min.js';\nimport { GenerateMeshBVHWorker } from '../src/workers/GenerateMeshBVHWorker.js';\nimport { acceleratedRaycast, MeshBVH, MeshBVHVisualizer } from '..';\n\nTHREE.Mesh.raycast = acceleratedRaycast;\n\nconst params = {\n\n\tuseWebWorker: true,\n\tradius: 1,\n\ttube: 0.3,\n\ttubularSegments: 500,\n\tradialSegments: 500,\n\tp: 3,\n\tq: 5,\n\n\tdisplayHelper: false,\n\thelperDepth: 10,\n\n};\n\nlet renderer, camera, scene, knot, clock, gui, helper, group, stats;\nlet outputContainer, loadContainer, loadBar, loadText;\nlet bvhGenerationWorker;\nlet generating = false;\n\ninit();\nrender();\n\nfunction init() {\n\n\tconst bgColor = 0xffca28;\n\n\toutputContainer = document.getElementById( 'output' );\n\tloadContainer = document.getElementById( 'loading-container' );\n\tloadBar = document.querySelector( '#loading-container .bar' );\n\tloadText = document.querySelector( '#loading-container .text' );\n\n\t// renderer setup\n\trenderer = new THREE.WebGLRenderer( { antialias: true } );\n\trenderer.setPixelRatio( window.devicePixelRatio );\n\trenderer.setSize( window.innerWidth, window.innerHeight );\n\trenderer.setClearColor( bgColor, 1 );\n\trenderer.outputEncoding = THREE.sRGBEncoding;\n\tdocument.body.appendChild( renderer.domElement );\n\n\t// scene setup\n\tscene = new THREE.Scene();\n\tscene.fog = new THREE.Fog( 0xffca28, 20, 60 );\n\n\tconst light = new THREE.DirectionalLight( 0xffffff, 1 );\n\tlight.position.set( 1, 1, 1 );\n\tscene.add( light );\n\tscene.add( new THREE.AmbientLight( 0xb0bec5, 0.8 ) );\n\n\t// camera setup\n\tcamera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 50 );\n\tcamera.position.set( 0, 0, 4 );\n\tcamera.far = 100;\n\tcamera.updateProjectionMatrix();\n\n\tclock = new THREE.Clock();\n\n\t// stats setup\n\tstats = new Stats();\n\tdocument.body.appendChild( stats.dom );\n\n\tgroup = new THREE.Group();\n\tscene.add( group );\n\n\tfor ( let i = 0; i < 400; i ++ ) {\n\n\t\tconst sphere = new THREE.Mesh(\n\t\t\tnew THREE.SphereGeometry( 1, 32, 32 ),\n\t\t\tnew THREE.MeshBasicMaterial()\n\t\t);\n\t\tsphere.position.set(\n\t\t\tMath.random() - 0.5,\n\t\t\tMath.random() - 0.5,\n\t\t\tMath.random() - 0.5\n\t\t).multiplyScalar( 70 );\n\t\tsphere.scale.setScalar( Math.random() * 0.3 + 0.1 );\n\t\tgroup.add( sphere );\n\n\t}\n\n\tbvhGenerationWorker = new GenerateMeshBVHWorker();\n\n\tgui = new GUI();\n\tconst helperFolder = gui.addFolder( 'helper' );\n\thelperFolder.add( params, 'displayHelper' ).name( 'enabled' ).onChange( v => {\n\n\t\tif ( v && helper ) {\n\n\t\t\thelper.update();\n\n\t\t}\n\n\t} );\n\thelperFolder.add( params, 'helperDepth', 1, 50, 1 ).onChange( v => {\n\n\t\tif ( helper ) {\n\n\t\t\thelper.depth = v;\n\t\t\thelper.update();\n\n\t\t}\n\n\t} );\n\thelperFolder.open();\n\n\tconst knotFolder = gui.addFolder( 'knot' );\n\tknotFolder.add( params, 'useWebWorker' );\n\tknotFolder.add( params, 'radius', 0.5, 2, 0.01 );\n\tknotFolder.add( params, 'tube', 0.2, 1.2, 0.01 );\n\tknotFolder.add( params, 'tubularSegments', 50, 2000, 1 );\n\tknotFolder.add( params, 'radialSegments', 5, 2000, 1 );\n\tknotFolder.add( params, 'p', 1, 10, 1 );\n\tknotFolder.add( params, 'q', 1, 10, 1 );\n\tknotFolder.add( { regenerateKnot }, 'regenerateKnot' ).name( 'regenerate' );\n\tknotFolder.open();\n\n\tregenerateKnot();\n\n\twindow.addEventListener( 'resize', function () {\n\n\t\tcamera.aspect = window.innerWidth / window.innerHeight;\n\t\tcamera.updateProjectionMatrix();\n\n\t\trenderer.setSize( window.innerWidth, window.innerHeight );\n\n\t}, false );\n\n}\n\nfunction regenerateKnot() {\n\n\tif ( generating ) {\n\n\t\treturn;\n\n\t}\n\n\tgenerating = true;\n\n\tif ( knot ) {\n\n\t\tknot.material.dispose();\n\t\tknot.geometry.dispose();\n\t\tgroup.remove( knot );\n\t\tgroup.remove( helper );\n\n\t}\n\n\tconst stallStartTime = window.performance.now();\n\tconst geomStartTime = window.performance.now();\n\tknot = new THREE.Mesh(\n\t\tnew THREE.TorusKnotGeometry(\n\t\t\tparams.radius,\n\t\t\tparams.tube,\n\t\t\tparams.tubularSegments,\n\t\t\tparams.radialSegments,\n\t\t\tparams.p,\n\t\t\tparams.q\n\t\t),\n\t\tnew THREE.MeshStandardMaterial( {\n\t\t\tcolor: new THREE.Color( 0x4db6ac ).convertSRGBToLinear(),\n\t\t\troughness: 0.75\n\n\t\t} )\n\t);\n\tconst geomTime = window.performance.now() - geomStartTime;\n\tconst startTime = window.performance.now();\n\tlet totalStallTime;\n\tif ( params.useWebWorker ) {\n\n\t\tconst onProgress = v => {\n\n\t\t\tconst perc = ( v * 100 ).toFixed( 0 );\n\t\t\tloadContainer.style.visibility = 'visible';\n\t\t\tloadBar.style.width = `${ perc }%`;\n\t\t\tloadText.innerText = `${ perc }%`;\n\n\t\t};\n\n\t\tbvhGenerationWorker.generate( knot.geometry, { onProgress } ).then( bvh => {\n\n\t\t\tloadContainer.style.visibility = 'hidden';\n\n\t\t\tknot.geometry.boundsTree = bvh;\n\t\t\tgroup.add( knot );\n\n\t\t\tconst deltaTime = window.performance.now() - startTime;\n\t\t\tgenerating = false;\n\n\t\t\thelper = new MeshBVHVisualizer( knot, 0 );\n\t\t\thelper.depth = params.helperDepth;\n\n\t\t\tif ( params.displayHelper ) {\n\n\t\t\t\thelper.update();\n\n\t\t\t}\n\n\t\t\tgroup.add( helper );\n\n\t\t\toutputContainer.textContent =\n\t\t\t\t`Geometry Generation Time : ${ geomTime.toFixed( 3 ) }ms\\n` +\n\t\t\t\t`BVH Generation Time : ${ deltaTime.toFixed( 3 ) }ms\\n` +\n\t\t\t\t`Frame Stall Time : ${ totalStallTime.toFixed( 3 ) }`;\n\n\t\t} );\n\n\t\ttotalStallTime = window.performance.now() - stallStartTime;\n\n\t} else {\n\n\t\tknot.geometry.boundsTree = new MeshBVH( knot.geometry );\n\t\ttotalStallTime = window.performance.now() - stallStartTime;\n\n\t\tgroup.add( knot );\n\n\t\tconst deltaTime = window.performance.now() - startTime;\n\t\tgenerating = false;\n\n\t\thelper = new MeshBVHVisualizer( knot );\n\t\thelper.depth = params.helperDepth;\n\t\thelper.update();\n\t\tgroup.add( helper );\n\n\t\toutputContainer.textContent =\n\t\t\t`Geometry Generation Time : ${ geomTime.toFixed( 3 ) }ms\\n` +\n\t\t\t`BVH Generation Time : ${ deltaTime.toFixed( 3 ) }ms\\n` +\n\t\t\t`Frame Stall Time : ${ totalStallTime.toFixed( 3 ) }`;\n\n\t}\n\n}\n\nfunction render() {\n\n\tstats.update();\n\trequestAnimationFrame( render );\n\n\tlet delta = clock.getDelta();\n\tgroup.rotation.x += 0.4 * delta;\n\tgroup.rotation.y += 0.6 * delta;\n\n\tif ( helper ) {\n\n\t\thelper.visible = params.displayHelper;\n\n\t}\n\n\trenderer.render( scene, camera );\n\n}\n"],"names":["$18c11f3350a906ea$export$6503ec6e8aabbaf","$18c11f3350a906ea$export$f7ad0328861e2f03","$18c11f3350a906ea$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","f","e","$8d6448069697305c$exports","a","c","appendChild","dom","u","d","children","style","display","l","document","createElement","cssText","addEventListener","preventDefault","k","performance","Date","now","g","r","Panel","h","self","memory","t","REVISION","addPanel","showPanel","begin","end","update","usedJSHeapSize","jsHeapSizeLimit","this","domElement","setMode","Infinity","Math","round","window","devicePixelRatio","v","m","n","p","q","width","height","b","getContext","font","textBaseline","fillStyle","fillRect","fillText","globalAlpha","w","min","max","drawImage","define","amd","Stats","$ilwiq","Mesh","raycast","$4CEV9","acceleratedRaycast","$09b28d582cee5bbc$var$params","useWebWorker","radius","tube","tubularSegments","radialSegments","displayHelper","helperDepth","$09b28d582cee5bbc$var$renderer","$09b28d582cee5bbc$var$camera","$09b28d582cee5bbc$var$scene","$09b28d582cee5bbc$var$knot","$09b28d582cee5bbc$var$clock","$09b28d582cee5bbc$var$gui","$09b28d582cee5bbc$var$helper","$09b28d582cee5bbc$var$group","$09b28d582cee5bbc$var$stats","$09b28d582cee5bbc$var$outputContainer","$09b28d582cee5bbc$var$loadContainer","$09b28d582cee5bbc$var$loadBar","$09b28d582cee5bbc$var$loadText","$09b28d582cee5bbc$var$bvhGenerationWorker","$09b28d582cee5bbc$var$generating","$09b28d582cee5bbc$var$regenerateKnot","material","dispose","geometry","remove","stallStartTime","geomStartTime","TorusKnotGeometry","MeshStandardMaterial","color","Color","convertSRGBToLinear","roughness","geomTime","startTime","totalStallTime","onProgress","perc","toFixed","visibility","innerText","generate","then","bvh","boundsTree","add","deltaTime","MeshBVHVisualizer","depth","textContent","MeshBVH","getElementById","querySelector","WebGLRenderer","antialias","setPixelRatio","setSize","innerWidth","innerHeight","setClearColor","outputEncoding","sRGBEncoding","body","Scene","fog","Fog","light","DirectionalLight","position","set","AmbientLight","PerspectiveCamera","far","updateProjectionMatrix","Clock","$parcel$interopDefault","Group","sphere","SphereGeometry","MeshBasicMaterial","random","multiplyScalar","scale","setScalar","$8todg","GenerateMeshBVHWorker","$jiuw3","GUI","helperFolder","addFolder","name","onChange","open","knotFolder","aspect","$09b28d582cee5bbc$var$init","$09b28d582cee5bbc$var$render","requestAnimationFrame","delta","getDelta","rotation","x","y","visible","render"],"version":3,"file":"asyncGenerate.c8e6bcbb.js.map"}