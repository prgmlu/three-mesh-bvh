function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},n={},i=t.parcelRequire4485;null==i&&((i=function(e){if(e in a)return a[e].exports;if(e in n){var t=n[e];delete n[e];var i={id:e,exports:{}};return a[e]=i,t.call(i.exports,i,i.exports),i.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){n[e]=t},t.parcelRequire4485=i);var o,r,d=i("ilwiq"),s=i("apoN1"),l=i("7lx9d"),c=i("5Rd1x"),p=i("7ePFa"),w={};o=w,r=function(){var e=function(){function t(e){return i.appendChild(e.dom),e}function a(e){for(var t=0;t<i.children.length;t++)i.children[t].style.display=t===e?"block":"none";n=e}var n=0,i=document.createElement("div");i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",(function(e){e.preventDefault(),a(++n%i.children.length)}),!1);var o=(performance||Date).now(),r=o,d=0,s=t(new e.Panel("FPS","#0ff","#002")),l=t(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=t(new e.Panel("MB","#f08","#201"));return a(0),{REVISION:16,dom:i,addPanel:t,showPanel:a,begin:function(){o=(performance||Date).now()},end:function(){d++;var e=(performance||Date).now();if(l.update(e-o,200),e>r+1e3&&(s.update(1e3*d/(e-r),100),r=e,d=0,c)){var t=performance.memory;c.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){o=this.end()},domElement:i,setMode:a}};return e.Panel=function(e,t,a){var n=1/0,i=0,o=Math.round,r=o(window.devicePixelRatio||1),d=80*r,s=48*r,l=3*r,c=2*r,p=3*r,w=15*r,m=74*r,u=30*r,f=document.createElement("canvas");f.width=d,f.height=s,f.style.cssText="width:80px;height:48px";var h=f.getContext("2d");return h.font="bold "+9*r+"px Helvetica,Arial,sans-serif",h.textBaseline="top",h.fillStyle=a,h.fillRect(0,0,d,s),h.fillStyle=t,h.fillText(e,l,c),h.fillRect(p,w,m,u),h.fillStyle=a,h.globalAlpha=.9,h.fillRect(p,w,m,u),{dom:f,update:function(s,y){n=Math.min(n,s),i=Math.max(i,s),h.fillStyle=a,h.globalAlpha=1,h.fillRect(0,0,d,w),h.fillStyle=t,h.fillText(o(s)+" "+e+" ("+o(n)+"-"+o(i)+")",l,c),h.drawImage(f,p+r,w,m-r,u,p,w,m-r,u),h.fillRect(p+m-r,w,r,u),h.fillStyle=a,h.globalAlpha=.9,h.fillRect(p+m-r,w,r,o((1-s/y)*u))}}},e},"object"==typeof w?w=r():"function"==typeof define&&define.amd?define(r):o.Stats=r();var m=i("jiuw3"),u=i("4CEV9");const f={firstPerson:!1,displayCollider:!1,displayBVH:!1,visualizeDepth:10,gravity:-30,playerSpeed:10,physicsSteps:5,reset:G};let h,y,g,S,x,v,b,M,P,V,C,A=!1,z=!1,B=!1,E=!1,D=!1,R=new d.Vector3,H=new d.Vector3(0,1,0),W=new d.Vector3,k=new d.Vector3,L=new d.Box3,T=new d.Matrix4,F=new d.Line3;function G(){R.set(0,0,0),V.position.set(15.75,-3,30),y.position.sub(C.target),C.target.copy(V.position),y.position.add(V.position),C.update()}function I(e){A?R.y=e*f.gravity:R.y+=e*f.gravity,V.position.addScaledVector(R,e);const t=C.getAzimuthalAngle();z&&(W.set(0,0,-1).applyAxisAngle(H,t),V.position.addScaledVector(W,f.playerSpeed*e)),B&&(W.set(0,0,1).applyAxisAngle(H,t),V.position.addScaledVector(W,f.playerSpeed*e)),E&&(W.set(-1,0,0).applyAxisAngle(H,t),V.position.addScaledVector(W,f.playerSpeed*e)),D&&(W.set(1,0,0).applyAxisAngle(H,t),V.position.addScaledVector(W,f.playerSpeed*e)),V.updateMatrixWorld();const a=V.capsuleInfo;L.makeEmpty(),T.copy(M.matrixWorld).invert(),F.copy(a.segment),F.start.applyMatrix4(V.matrixWorld).applyMatrix4(T),F.end.applyMatrix4(V.matrixWorld).applyMatrix4(T),L.expandByPoint(F.start),L.expandByPoint(F.end),L.min.addScalar(-a.radius),L.max.addScalar(a.radius),M.geometry.boundsTree.shapecast({intersectsBounds:e=>e.intersectsBox(L),intersectsTriangle:e=>{const t=W,n=k,i=e.closestPointToSegment(F,t,n);if(i<a.radius){const e=a.radius-i,o=n.sub(t).normalize();F.start.addScaledVector(o,e),F.end.addScaledVector(o,e)}}});const n=W;n.copy(F.start).applyMatrix4(M.matrixWorld);const i=k;i.subVectors(n,V.position),A=i.y>Math.abs(e*R.y*.25);const o=Math.max(0,i.length()-1e-5);i.normalize().multiplyScalar(o),V.position.add(i),A?R.set(0,0,0):(i.normalize(),R.addScaledVector(i,-i.dot(R))),y.position.sub(C.target),C.target.copy(V.position),y.position.add(V.position),V.position.y<-25&&G()}!function(){const t=1251612;h=new d.WebGLRenderer({antialias:!0}),h.setPixelRatio(window.devicePixelRatio),h.setSize(window.innerWidth,window.innerHeight),h.setClearColor(t,1),h.shadowMap.enabled=!0,h.shadowMap.type=d.PCFSoftShadowMap,h.outputEncoding=d.sRGBEncoding,document.body.appendChild(h.domElement),g=new d.Scene,g.fog=new d.Fog(t,20,70);const a=new d.DirectionalLight(16777215,1);a.position.set(1,1.5,1).multiplyScalar(50),a.shadow.mapSize.setScalar(2048),a.shadow.bias=-1e-4,a.shadow.normalBias=.05,a.castShadow=!0;const n=a.shadow.camera;n.bottom=n.left=-30,n.top=30,n.right=45,g.add(a),g.add(new d.HemisphereLight(16777215,2241348,.4)),y=new d.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,50),y.position.set(10,10,-10),y.far=100,y.updateProjectionMatrix(),window.camera=y,S=new d.Clock,C=new c.OrbitControls(y,h.domElement),v=new(e(w)),document.body.appendChild(v.dom),(new l.GLTFLoader).load("../models/dungeon_low_poly_game_level_challenge/scene.gltf",(e=>{const t=e.scene;t.scale.setScalar(.01);const a=new d.Box3;a.setFromObject(t),a.getCenter(t.position).negate(),t.updateMatrixWorld(!0);const n={};t.traverse((e=>{if(!(/Boss/.test(e.name)||/Enemie/.test(e.name)||/Shield/.test(e.name)||/Sword/.test(e.name)||/Character/.test(e.name)||/Gate/.test(e.name)||/Cube/.test(e.name)||e.material&&1===e.material.color.r)&&e.isMesh){const t=e.material.color.getHex();n[t]=n[t]||[],n[t].push(e)}})),b=new d.Group;for(const e in n){const t=n[e],a=[];if(t.forEach((e=>{if(0!==e.material.emissive.r)b.attach(e);else{const t=e.geometry.clone();t.applyMatrix4(e.matrixWorld),a.push(t)}})),a.length){const t=p.mergeBufferGeometries(a),n=new d.Mesh(t,new d.MeshStandardMaterial({color:parseInt(e),shadowSide:2}));n.castShadow=!0,n.receiveShadow=!0,n.material.shadowSide=2,b.add(n)}}const i=new u.StaticGeometryGenerator(b);i.attributes=["position"];const o=i.generate();o.boundsTree=new u.MeshBVH(o,{lazyGeneration:!1}),M=new d.Mesh(o),M.material.wireframe=!0,M.material.opacity=.5,M.material.transparent=!0,P=new u.MeshBVHVisualizer(M,f.visualizeDepth),g.add(P),g.add(M),g.add(b)})),V=new d.Mesh(new s.RoundedBoxGeometry(1,2,1,10,.5),new d.MeshStandardMaterial),V.geometry.translate(0,-.5,0),V.capsuleInfo={radius:.5,segment:new d.Line3(new d.Vector3,new d.Vector3(0,-1,0))},V.castShadow=!0,V.receiveShadow=!0,V.material.shadowSide=2,g.add(V),G(),x=new m.GUI,x.add(f,"firstPerson").onChange((e=>{e||y.position.sub(C.target).normalize().multiplyScalar(10).add(C.target)}));const i=x.addFolder("Visualization");i.add(f,"displayCollider"),i.add(f,"displayBVH"),i.add(f,"visualizeDepth",1,20,1).onChange((e=>{P.depth=e,P.update()})),i.open();const o=x.addFolder("Player");o.add(f,"physicsSteps",0,30,1),o.add(f,"gravity",-100,100,.01).onChange((e=>{f.gravity=parseFloat(e)})),o.add(f,"playerSpeed",1,20),o.open(),x.add(f,"reset"),x.open(),window.addEventListener("resize",(function(){y.aspect=window.innerWidth/window.innerHeight,y.updateProjectionMatrix(),h.setSize(window.innerWidth,window.innerHeight)}),!1),window.addEventListener("keydown",(function(e){switch(e.code){case"KeyW":z=!0;break;case"KeyS":B=!0;break;case"KeyD":D=!0;break;case"KeyA":E=!0;break;case"Space":A&&(R.y=10,A=!1)}})),window.addEventListener("keyup",(function(e){switch(e.code){case"KeyW":z=!1;break;case"KeyS":B=!1;break;case"KeyD":D=!1;break;case"KeyA":E=!1}}))}(),function e(){v.update(),requestAnimationFrame(e);const t=Math.min(S.getDelta(),.1);f.firstPerson?(C.maxPolarAngle=Math.PI,C.minDistance=1e-4,C.maxDistance=1e-4):(C.maxPolarAngle=Math.PI/2,C.minDistance=1,C.maxDistance=20);if(M){M.visible=f.displayCollider,P.visible=f.displayBVH;const e=f.physicsSteps;for(let a=0;a<e;a++)I(t/e)}C.update(),h.render(g,y)}();
//# sourceMappingURL=characterMovement.65b34017.js.map
